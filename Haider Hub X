--==================================================
--  TP BRAIRONT + IR + MINIMIZAR + FIX CAÍDA
--  VIP + EASY PARKOUR + TP MONEY
--  Haider Hub X
--==================================================

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local MarketplaceService = game:GetService("MarketplaceService")

local player = Players.LocalPlayer

local PASS_ID = 1703205341
local PASS_IMAGE = ""

pcall(function()
	local info = MarketplaceService:GetProductInfo(PASS_ID, Enum.InfoType.GamePass)
	PASS_IMAGE = "rbxassetid://" .. info.IconImageAssetId
end)

local basePositions = {
	Vector3.new(152.51, 5.38, -137),
	Vector3.new(247.72, 5.38, -137),
	Vector3.new(343.75, 5.38, -137),
	Vector3.new(483.16, 5.38, -137),
	Vector3.new(655.36, 5.38, -137),
	Vector3.new(898.47, 5.38, -137),
	Vector3.new(1343.44, 5.38, -137),
	Vector3.new(1928.01, 5.38, -137),
	Vector3.new(2618.69, 5.38, -137),
	Vector3.new(3133.93, 5.38, -137),
	Vector3.new(3485.94, 5.38, -137),
	Vector3.new(3841.31, 5.38, -137),
}

local LAST_INDEX = #basePositions

local modifiedParts = {}
local collisionActive = false
local minimized = false
local moneyGui

local ScreenGui = Instance.new("ScreenGui", player.PlayerGui)
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0,210,0,320)
Frame.Position = UDim2.new(0.5,-105,0.5,-160)
Frame.BackgroundColor3 = Color3.fromRGB(0,0,0)
Frame.Active = true
Frame.Draggable = true
Frame.BorderSizePixel = 0
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0,16)

local Stroke = Instance.new("UIStroke", Frame)
Stroke.Color = Color3.fromRGB(0,140,255)
Stroke.Thickness = 2

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1,-40,0,40)
Title.BackgroundTransparency = 1
Title.Text = "Haider Hub X"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.TextColor3 = Color3.fromRGB(0,140,255)
Title.ZIndex = 5

local MinBtn = Instance.new("TextButton", Frame)
MinBtn.Size = UDim2.new(0,30,0,22)
MinBtn.Position = UDim2.new(1,-34,0,6)
MinBtn.Text = "—"
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextSize = 18
MinBtn.TextColor3 = Color3.new(1,1,1)
MinBtn.BackgroundColor3 = Color3.fromRGB(30,30,30)
MinBtn.ZIndex = 6
Instance.new("UICorner", MinBtn).CornerRadius = UDim.new(0,6)

local function createButton(text, y)
	local b = Instance.new("TextButton", Frame)
	b.Size = UDim2.new(0.85,0,0,35)
	b.Position = UDim2.new(0.075,0,y,0)
	b.Text = text
	b.Font = Enum.Font.GothamBold
	b.TextSize = 14
	b.TextColor3 = Color3.new(1,1,1)
	b.BackgroundColor3 = Color3.fromRGB(30,30,30)
	b.ZIndex = 10
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,8)
	local s = Instance.new("UIStroke", b)
	s.Color = Color3.fromRGB(0,140,255)
	s.Thickness = 2
	return b
end

local TpButton    = createButton("TP", 0.18)
local IrButton    = createButton("IR", 0.32)
local VipButton   = createButton("Eliminar VIP", 0.46)
local ParkButton  = createButton("Easy Parkour", 0.60)
local MoneyButton = createButton("TP Money", 0.74)

local buttons = {TpButton, IrButton, VipButton, ParkButton, MoneyButton}

local SAFE_Y = 10
local speed = 2400

local function normalizeY(hrp)
	if hrp.Position.Y < SAFE_Y then
		hrp.CFrame = CFrame.new(hrp.Position.X, SAFE_Y, hrp.Position.Z)
	end
end

local function disableCollision(hrp)
	if collisionActive then return end
	collisionActive = true
	modifiedParts = {}

	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("BasePart") and obj.Position.Y > hrp.Position.Y - 5 then
			modifiedParts[obj] = obj.CanCollide
			obj.CanCollide = false
		end
	end
end

local function restoreCollision()
	if not collisionActive then return end
	for p, v in pairs(modifiedParts) do
		if p and p.Parent then
			p.CanCollide = v
		end
	end
	modifiedParts = {}
	collisionActive = false
end

local function nearestPos(hrp)
	local bestIndex = 1
	local bestDist = (hrp.Position - basePositions[1]).Magnitude
	for i, p in ipairs(basePositions) do
		local d = (hrp.Position - p).Magnitude
		if d < bestDist then
			bestDist = d
			bestIndex = i
		end
	end
	return basePositions[bestIndex]
end

local function tweenTo(hrp, pos)
	local dist = (hrp.Position - pos).Magnitude
	local t = dist / speed
	if t < 0.03 then t = 0.03 end

	local tw = TweenService:Create(
		hrp,
		TweenInfo.new(t, Enum.EasingStyle.Linear),
		{CFrame = CFrame.new(pos)}
	)
	tw:Play()
	tw.Completed:Wait()
end

TpButton.MouseButton1Click:Connect(function()
	local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	normalizeY(hrp)
	disableCollision(hrp)
	tweenTo(hrp, nearestPos(hrp))
	task.wait(0.05)
	tweenTo(hrp, basePositions[1])
	restoreCollision()
end)

IrButton.MouseButton1Click:Connect(function()
	local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	normalizeY(hrp)
	disableCollision(hrp)
	tweenTo(hrp, nearestPos(hrp))
	task.wait(0.05)
	tweenTo(hrp, basePositions[LAST_INDEX])
	restoreCollision()
end)

VipButton.MouseButton1Click:Connect(function()
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("BasePart") then
			local n = string.upper(obj.Name)
			if n == "VIP" or n == "VIP_PLUS" then
				obj:Destroy()
			end
		end
	end
end)

ParkButton.MouseButton1Click:Connect(function()
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("BasePart") then
			local n = string.upper(obj.Name)
			if n == "LAVA" or n == "LAVA2" then
				obj:Destroy()
			end
		end
	end
end)

MoneyButton.MouseButton1Click:Connect(function()
	if moneyGui then
		moneyGui.Enabled = not moneyGui.Enabled
		return
	end

	moneyGui = Instance.new("ScreenGui", player.PlayerGui)
	moneyGui.ResetOnSpawn = false

	local f = Instance.new("Frame", moneyGui)
	f.Size = UDim2.new(0,220,0,180)
	f.Position = UDim2.new(0.05,0,0.4,0)
	f.BackgroundColor3 = Color3.fromRGB(30,30,30)
	f.Active = true
	f.Draggable = true
	Instance.new("UICorner", f).CornerRadius = UDim.new(0,12)

	local st = Instance.new("UIStroke", f)
	st.Color = Color3.fromRGB(0,140,255)
	st.Thickness = 2

	local function tp(partName)
		local hrp = player.Character:WaitForChild("HumanoidRootPart")
		local part = workspace:FindFirstChild(partName, true)
		if part then
			hrp.CFrame = part.CFrame + Vector3.new(0,3,0)
		end
	end

	local function mBtn(txt, y, part)
		local b = Instance.new("TextButton", f)
		b.Size = UDim2.new(0.9,0,0,35)
		b.Position = UDim2.new(0.05,0,0,y)
		b.Text = txt
		b.Font = Enum.Font.SourceSansBold
		b.TextSize = 14
		b.TextColor3 = Color3.new(1,1,1)
		b.BackgroundColor3 = Color3.fromRGB(60,60,60)
		Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)
		b.MouseButton1Click:Connect(function()
			tp(part)
		end)
	end

	mBtn("TP Money 1",30,"MoneyObby1End")
	mBtn("TP Money 2",75,"MoneyObby2End")
	mBtn("TP Money 3",120,"MoneyObby3End")
end)

MinBtn.MouseButton1Click:Connect(function()
	minimized = not minimized
	for _, b in ipairs(buttons) do
		b.Visible = not minimized
	end
	Title.Visible = not minimized
	MinBtn.Text = minimized and "+" or "—"
	Frame.Size = minimized and UDim2.new(0,90,0,90) or UDim2.new(0,210,0,320)
end)
